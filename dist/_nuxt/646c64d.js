(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{756:function(e,t,o){"use strict";o.r(t);o(21),o(35),o(50),o(51),o(29),o(14),o(28);var r=o(5),l=o(16),n=(o(47),o(3));function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}var d={layout:"dashboard",mounted:function(){this.getGalleryItem()},methods:{openDelete:function(e){this.deletePopup=!0,this.currItem=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){Object(l.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e)},deleteGalleryImg:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deletePopup=!1,o=null,t.prev=2,o=n.Loading.service({fullscreen:!0,background:"#ffffffe6"}),t.next=6,e.$axios.delete("/galleryimages/".concat(e.currItem._id));case 6:n.Notification.success({title:"Success",message:"The image deleted successfully"}),e.deletePopup=!1,e.getGalleryItem(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),n.Notification.error({title:"Error",message:"There is something wrong"});case 14:return t.prev=14,e.$nextTick((function(){o.close()})),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))()},addImageToGallery:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.fileList.length){t.next=3;break}return n.Notification.error({title:"Error",message:"You must add image for that gallery"}),t.abrupt("return");case 3:return o=null,t.prev=4,o=n.Loading.service({fullscreen:!0,background:"#ffffffe6"}),(l=new FormData).append("image",null===(r=e.fileList)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.raw),l.append("folder_ID",e.$route.params.id),t.next=11,e.$axios.post("/galleryimages",l);case 11:n.Notification.success({title:"Success",message:"The image added successfully"}),e.addPopup=!1,e.getGalleryItem(),window.scrollTo({top:0,behavior:"smooth"}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),n.Notification.error({title:"Error",message:"There is something wrong"});case 20:return t.prev=20,e.$nextTick((function(){o.close()})),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[4,17,20,23]])})))()},handleRemove:function(e,t){this.fileList=t,console.log("Remove: ",e,this.fileList)},onChange:function(e,t){this.fileList=t,console.log("Change: ",e,this.fileList)},openAddPopup:function(){this.fileList=[],this.addPopup=!0},getGalleryItem:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null,t.prev=1,o=n.Loading.service({fullscreen:!0,background:"#ffffffe6"}),t.next=5,e.$axios.get("/gallery-folders/".concat(e.$route.params.id));case 5:c=t.sent,e.galleryItem=null===(r=c.data)||void 0===r?void 0:r.folder,e.galleryImgs=null===(l=c.data)||void 0===l?void 0:l.images;case 8:return t.prev=8,e.$nextTick((function(){o.close()})),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])})))()}},data:function(){return{addPopup:!1,deletePopup:!1,galleryItem:{},currItem:null,fileList:[],galleryImgs:[]}}},f=d,v=o(19),component=Object(v.a)(f,(function(){var e=this,t=e._self._c;return t("div",[e._m(0),e._v(" "),t("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-[30px]"},[t("div",[t("img",{staticClass:"max-w-[700px] w-full object-cover",attrs:{src:e.galleryItem.cover,alt:""}})]),e._v(" "),t("div",[t("div",{staticClass:"mb-5 mt-5"},[t("h3",{staticClass:"font-semibold text-sm text-[#4f46e5]"},[e._v("English Name")]),e._v(" "),t("p",[e._v("\n          "+e._s(e.galleryItem.nameEN)+"\n        ")])]),e._v(" "),t("div",{staticClass:"mb-5 mt-5"},[t("h3",{staticClass:"font-semibold text-sm text-[#4f46e5]"},[e._v("Arabic Name")]),e._v(" "),t("p",[e._v("\n          "+e._s(e.galleryItem.nameAR)+"\n        ")])]),e._v(" "),t("div",{staticClass:"mb-5 mt-5"},[t("h3",{staticClass:"font-semibold text-sm text-[#4f46e5]"},[e._v("Tag")]),e._v(" "),t("p",[e._v("\n          "+e._s(e.galleryItem.tag)+"\n        ")])]),e._v(" "),t("div",{staticClass:"mb-5 mt-5"},[t("h3",{staticClass:"font-semibold text-sm text-[#4f46e5]"},[e._v("Gallery Date")]),e._v(" "),t("p",[e._v("\n          "+e._s(new Date(e.galleryItem.date).toLocaleDateString())+"\n        ")])])])]),e._v(" "),t("div",{staticClass:"pt-3 mt-3 border-t border-grey-light"},[t("div",{staticClass:"flex flex-row-reverse mb-2"},[t("button",{staticClass:"bg-[#4f46e5] hover:bg-[#4f46e5ab] focus:outline-none text-white p-2 rounded-lg",on:{click:e.openAddPopup}},[e._v("Add Image")])]),e._v(" "),t("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-[10px]"},e._l(e.galleryImgs,(function(img,o){return t("div",{key:o},[t("button",{staticClass:"bg-[#fa4848] hover:bg-[#fa4848a3] focus:outline-none text-white p-1 px-2 rounded-xl mb-1",on:{click:function(t){return t.stopPropagation(),e.openDelete(img)}}},[t("i",{staticClass:"el-icon-delete"})]),e._v(" "),t("img",{staticClass:"w-full h-[200px] object-cover border border-grey-light p-1",attrs:{src:img.image,alt:""}})])})),0)]),e._v(" "),t("el-dialog",{attrs:{title:"Add Image To Gallery",visible:e.addPopup,width:"40%"},on:{"update:visible":function(t){e.addPopup=t}}},[t("div",{staticClass:"mb-4"},[t("label",{staticClass:"mb-3 block text-sm"},[e._v("Image")]),e._v(" "),t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","auto-upload":!1,"on-remove":e.handleRemove,"on-change":e.onChange,"file-list":e.fileList,accept:"image/*"}},[t("i",{staticClass:"el-icon-upload"}),e._v(" "),t("div",{staticClass:"el-upload__text"},[e._v("Drop file here or "),t("em",[e._v("click to upload")])]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("jpg/png files with a size less than 500kb")])])],1),e._v(" "),t("span",{staticClass:"dialog-footer flex gap-[5px]",attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"bg-[#4f46e5] hover:bg-[#4f46e5ab] focus:outline-none text-white p-1 px-2 rounded-md",on:{click:function(t){e.addPopup=!1}}},[e._v("Cancel")]),e._v(" "),t("button",{staticClass:"bg-[#2ecc71] hover:bg-[#27ae60] focus:outline-none text-white p-1 px-2 rounded-md",on:{click:function(t){return e.addImageToGallery()}}},[e._v("Add")])])]),e._v(" "),t("el-dialog",{attrs:{title:"Delete Gallery",visible:e.deletePopup,width:"30%"},on:{"update:visible":function(t){e.deletePopup=t}}},[t("h5",{staticClass:"text-md"},[t("i",{staticClass:"text-xl text-[red] el-icon-delete"}),e._v(" Are you sure you want to delete this image ?")]),e._v(" "),t("span",{staticClass:"dialog-footer flex gap-[5px]",attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"bg-[#4f46e5] hover:bg-[#4f46e5ab] focus:outline-none text-white p-1 px-2 rounded-md",on:{click:function(t){e.deletePopup=!1}}},[e._v("Cancel")]),e._v(" "),t("button",{staticClass:"bg-[#fa4848] hover:bg-[#fa4848a3] focus:outline-none text-white p-1 px-2 rounded-md",on:{click:function(t){return e.deleteGalleryImg()}}},[e._v("Delete")])])])],1)}),[function(){var e=this._self._c;return e("div",[e("h4",{staticClass:"font-semibold text-xl mb-2"},[this._v("Gallery")])])}],!1,null,null,null);t.default=component.exports}}]);